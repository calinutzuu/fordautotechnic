
!function(){var root=this;var InteriorImageCarouselFacade=function(mediator){this.carousel=EP2.Carousel({el:$('#intImageCarousel').hide(),autoPlay:false,interval:1000});this.mediator=mediator;this.mediator.subscribe('selectorReady',this.render,this);this.mediator.subscribe(EP2.XAxis.Events.MOVE,this.fade,this);this.mediator.subscribe('interiorImageSelected',this.show,this);this.template=Handlebars.compile($('#interiorImageCarouselSlideTemplate').html());this.fade();};InteriorImageCarouselFacade.prototype={render:function(payload){this.carousel.refresh(this.template(payload.interiorImages));},fade:function(){this.carousel.$el.fadeOut();this.carousel.stop();},show:function(payload){this.carousel.$el.fadeIn();this.carousel.jumpTo(payload.index);this.carousel.buildIndicator();this.carousel.buildPointers();this.carousel.start(true);overlayer.open({content:this.carousel.$el,onClose:function(){this.mediator.notify('overlayClosed',{});this.fade();this.carousel.$el.appendTo('body');}.bind(this)});this.mediator.notify('overlayOpen',{});this.slideSize();},slideSize:function(payload){var slideSize=this.carousel.$el.find('.slide-wrapper .slide').index();if(slideSize>1){this.carousel.$el.find('nav').show('fast');}else{this.carousel.$el.find('nav').hide('fast');}}};root.InteriorImageCarouselFacade=function(mediator,carousel){return new InteriorImageCarouselFacade(mediator,carousel);}}.call(EP2);
