
!function(){var root=this;var NameplateCarouselFacade=function(mediator,carousel){this.template=Handlebars.compile($('#carouselSlideTemplate').html());this.mediator=mediator;this.mediator.subscribe('vehicleChange',this.render,this);this.mediator.subscribe('overlayOpen',this.pause,this);this.mediator.subscribe('overlayClose',this.start,this);this.mediator.subscribe(EP2.XAxis.Events.MOVE,this.fade,this);this.carousel=carousel;};NameplateCarouselFacade.prototype={render:function(payload){if(payload.data.promos&&payload.data.promos.length>0){this.carousel.refresh(this.template(payload.data));this.carousel.$el.fadeIn();setTimeout(this.start.bind(this),2500);}},start:function(){this.carousel.start();},pause:function(){this.carousel.pause();},fade:function(){this.pause();this.carousel.$el.fadeOut();}};root.NameplateCarouselFacade=function(mediator,carousel){return new NameplateCarouselFacade(mediator,carousel);}}.call(EP2);
